<div class="app-container">
  <!-- App Header -->
  <mat-toolbar class="app-header" color="primary">
    <div class="header-content">
      <div class="app-title">
        <mat-icon class="title-icon" aria-hidden="true">wb_sunny</mat-icon>
        <h1>{{title}}</h1>
      </div>
      
      <div class="header-actions">
        <!-- Temperature Unit Toggle -->
        <button 
          mat-icon-button 
          class="unit-toggle"
          (click)="toggleTemperatureUnit()"
          [attr.aria-label]="'Switch to ' + (userPreferences.temperatureUnit === 'C' ? 'Fahrenheit' : 'Celsius')"
          [title]="'Currently showing ' + getTemperatureUnitLabel()">
          <span class="unit-label">{{getTemperatureUnitLabel()}}</span>
        </button>
      </div>
    </div>
  </mat-toolbar>

  <!-- Main Content -->
  <main class="main-content" role="main">
    
    <!-- Screen reader status announcement -->
    <div 
      class="sr-only" 
      aria-live="polite" 
      aria-atomic="true"
      [attr.aria-label]="getAppStatus()">
      {{getAppStatus()}}
    </div>
    
    <!-- Search Section -->
    <section class="search-section" aria-labelledby="search-heading">
      <div class="search-container">
        <h2 id="search-heading" class="sr-only">City Search</h2>
        
        <app-city-search
          [initialQuery]="getInitialSearchQuery()"
          [disabled]="false"
          placeholder="Search for a city..."
          (citySelected)="onCitySelected($event)"
          (searchQueryChanged)="onSearchQueryChanged($event)"
          (searchError)="onSearchError($event)">
        </app-city-search>
        
        <!-- Search Instructions -->
        <div class="search-instructions" *ngIf="!selectedCity && !searchQuery">
          <p>Enter a city name to see current weather and 5-day forecast</p>
        </div>
      </div>
    </section>

    <!-- Weather Content Section -->
    <section 
      class="weather-section" 
      aria-labelledby="weather-heading"
      [class.has-content]="selectedCity">
      
      <h2 id="weather-heading" class="sr-only">Weather Information</h2>
      
      <app-weather-panel
        [selectedCity]="selectedCity"
        [forecastDays]="5"
        [temperatureUnit]="userPreferences.temperatureUnit"
        (weatherLoaded)="onWeatherLoaded($event)"
        (weatherError)="onWeatherError($event)"
        (refreshRequested)="onWeatherRefresh($event)">
      </app-weather-panel>
    </section>
  </main>

  <!-- App Footer -->
  <footer class="app-footer" role="contentinfo">
    <div class="footer-content">
      <p class="footer-text">
        Weather data provided by 
        <a 
          href="https://open-meteo.com/" 
          target="_blank" 
          rel="noopener noreferrer"
          aria-label="Open-Meteo weather service (opens in new tab)">
          Open-Meteo
        </a>
      </p>
    </div>
  </footer>
</div>
